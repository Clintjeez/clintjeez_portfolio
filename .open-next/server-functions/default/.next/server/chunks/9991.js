"use strict";exports.id=9991,exports.ids=[9991],exports.modules={79991:(e,l,a)=>{a.r(l),a.d(l,{UploadComponent:()=>_});var t=a(96089),s=a(6348),o=a(97673),i=a(74730),d=a(10326),r=a(42337),n=a(36814),u=a(85768),c=a(2608),p=a(12536),m=a(54511),g=a(17577),b="lexical-upload",h={depth:0},x=e=>{let{data:{fields:l,relationTo:a,value:x},nodeKey:_}=e;if("object"==typeof x)throw Error("Upload value should be a string or number. The Lexical Upload component should not receive the populated value object.");let{config:{routes:{api:f},serverURL:j},getEntityConfig:v}=(0,u.b)(),w=(0,g.useRef)(null),{uuid:D}=(0,i.b)(),$=(0,c.useEditDepth)(),[N]=(0,r.g)(),{editorConfig:C,fieldProps:{readOnly:S,schemaPath:y}}=(0,i.b)(),{i18n:P,t:R}=(0,p.d)(),[U,k]=(0,g.useReducer)(e=>e+1,0),[E]=(0,g.useState)(()=>v({collectionSlug:a})),B=(0,g.useId)(),L=(0,c.formatDrawerSlug)({slug:"lexical-upload-drawer-"+D+B,depth:$}),{toggleDrawer:F}=(0,s.a)(L,!0),{closeDocumentDrawer:I,DocumentDrawer:T,DocumentDrawerToggler:K}=(0,o.a)({id:x,collectionSlug:E.slug}),[{data:z},{setParams:A}]=(0,c.usePayloadAPI)(`${j}${f}/${E.slug}/${x}`,{initialParams:h}),M=z?.thumbnailURL||z?.url,O=(0,g.useCallback)(()=>{N.update(()=>{m.gID(_)?.remove()})},[N,_]),q=(0,g.useCallback)(e=>{A({...h,cacheBust:U}),k(),I()},[A,U,I]),G=C?.resolvedFeatureMap?.get("upload")?.sanitizedClientFeatureProps.collections?.[E.slug]?.hasExtraFields,H=(0,g.useCallback)((e,l)=>{N.update(()=>{let e=(0,m.gID)(_);if(e){let a={...e.getData(),fields:l};e.setData(a)}})},[N,_]);return(0,d.jsxs)("div",{className:b,contentEditable:!1,ref:w,children:[(0,d.jsxs)("div",{className:`${b}__card`,children:[(0,d.jsxs)("div",{className:`${b}__topRow`,children:[(0,d.jsx)("div",{className:`${b}__thumbnail`,children:M?(0,d.jsx)("img",{alt:z?.filename,"data-lexical-upload-id":x,"data-lexical-upload-relation-to":a,src:M}):(0,d.jsx)(c.File,{})}),(0,d.jsxs)("div",{className:`${b}__topRowRightPanel`,children:[(0,d.jsx)("div",{className:`${b}__collectionLabel`,children:(0,n.i)(E.labels.singular,P)}),N.isEditable()&&(0,d.jsxs)("div",{className:`${b}__actions`,children:[G?(0,d.jsx)(c.Button,{buttonStyle:"icon-label",className:`${b}__upload-drawer-toggler`,disabled:S,el:"button",icon:"edit",onClick:()=>{F()},round:!0,tooltip:R("fields:editRelationship")}):null,(0,d.jsx)(c.Button,{buttonStyle:"icon-label",className:`${b}__swap-drawer-toggler`,disabled:S,el:"button",icon:"swap",onClick:()=>{N.dispatchCommand(t.c,{replace:{nodeKey:_}})},round:!0,tooltip:R("fields:swapUpload")}),(0,d.jsx)(c.Button,{buttonStyle:"icon-label",className:`${b}__removeButton`,disabled:S,icon:"x",onClick:e=>{e.preventDefault(),O()},round:!0,tooltip:R("fields:removeUpload")})]})]})]}),(0,d.jsx)("div",{className:`${b}__bottomRow`,children:(0,d.jsx)(K,{className:`${b}__doc-drawer-toggler`,children:(0,d.jsx)("strong",{children:z?.filename})})})]}),x?(0,d.jsx)(T,{onSave:q}):null,G?(0,d.jsx)(t.a,{data:l,drawerSlug:L,drawerTitle:R("general:editLabel",{label:(0,n.i)(E.labels.singular,P)}),featureKey:"upload",handleDrawerSubmit:H,schemaPath:y,schemaPathSuffix:E.slug}):null]})},_=e=>(0,d.jsx)(t.b,{...e,uploads:!0,children:(0,d.jsx)(x,{...e})})}};