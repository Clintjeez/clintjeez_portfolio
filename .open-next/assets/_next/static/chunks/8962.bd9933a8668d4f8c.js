"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8962],{88962:function(e,l,a){a.r(l),a.d(l,{RelationshipComponent:function(){return _}});var o=a(74209),t=a(68458),n=a(28724),s=a(57437),i=a(17433),c=a(46778),r=a(64667),u=a(76578),d=a(23521),p=a(50429),b=a(2265),h="lexical-relationship",v={depth:0},m=e=>{var l,a,m;let{data:{relationTo:_,value:g},nodeKey:f}=e;if("object"==typeof g)throw Error("Relationship value should be a string or number. The Lexical Relationship component should not receive the populated value object.");let x=(0,b.useRef)(null),[j]=(0,i.g)(),{fieldProps:{readOnly:w}}=(0,n.b)(),{config:{routes:{api:N},serverURL:C},getEntityConfig:R}=(0,r.b)(),[k]=(0,b.useState)(()=>R({collectionSlug:_})),{i18n:y,t:D}=(0,u.d)(),[E,S]=(0,b.useReducer)(e=>e+1,0),[{data:B},{setParams:P}]=(0,d.usePayloadAPI)("".concat(C).concat(N,"/").concat(k.slug,"/").concat(g),{initialParams:v}),{closeDocumentDrawer:T,DocumentDrawer:A,DocumentDrawerToggler:I}=(0,t.a)({id:g,collectionSlug:k.slug}),K=(0,b.useCallback)(()=>{j.update(()=>{var e;null===(e=(0,p.gID)(f))||void 0===e||e.remove()})},[j,f]),L=b.useCallback(()=>{P({...v,cacheBust:E}),T(),S()},[E,P,T]);return(0,s.jsxs)("div",{className:h,contentEditable:!1,ref:x,children:[(0,s.jsxs)("div",{className:"".concat(h,"__wrap"),children:[(0,s.jsx)("p",{className:"".concat(h,"__label"),children:D("fields:labelRelationship",{label:(null===(l=k.labels)||void 0===l?void 0:l.singular)?(0,c.i)(null===(a=k.labels)||void 0===a?void 0:a.singular,y):k.slug})}),(0,s.jsx)(I,{className:"".concat(h,"__doc-drawer-toggler"),children:(0,s.jsx)("p",{className:"".concat(h,"__title"),children:B?B[(null==k?void 0:null===(m=k.admin)||void 0===m?void 0:m.useAsTitle)||"id"]:g})})]}),j.isEditable()&&(0,s.jsxs)("div",{className:"".concat(h,"__actions"),children:[(0,s.jsx)(d.Button,{buttonStyle:"icon-label",className:"".concat(h,"__swapButton"),disabled:w,el:"button",icon:"swap",onClick:()=>{f&&j.dispatchCommand(o.a,{replace:{nodeKey:f}})},round:!0,tooltip:D("fields:swapRelationship")}),(0,s.jsx)(d.Button,{buttonStyle:"icon-label",className:"".concat(h,"__removeButton"),disabled:w,icon:"x",onClick:e=>{e.preventDefault(),K()},round:!0,tooltip:D("fields:removeRelationship")})]}),!!g&&(0,s.jsx)(A,{onSave:L})]})},_=e=>(0,s.jsx)(m,{...e})}}]);